INSTALACIÓN Y CONFIGURACIÓN SEGURA DE LA API KEY (OPENAI)

IMPORTANTE: Nunca escribas tu API Key directamente en el código (archivos .php). Es un riesgo de seguridad grave.

A continuación, te explico cómo definir la variable de entorno `OPENAI_API_KEY` correctamente en diferentes entornos:

===============================================================
1. EN AWS ELASTIC BEANSTALK (Recomendado si usas este servicio)
===============================================================
Si despliegas tu aplicación usando Elastic Beanstalk, configurar la variable es muy sencillo desde el panel de control:

1. Ve a la consola de AWS -> Elastic Beanstalk.
2. Selecciona tu entorno (Environment).
3. En el menú de la izquierda, haz clic en "Configuration" (Configuración).
4. Busca la sección "Software" y haz clic en "Edit".
5. Baja hasta el final, a la sección "Environment properties".
6. Añade una nueva propiedad:
   - Name: OPENAI_API_KEY
   - Value: sk-proj-12345... (tu clave completa aquí)
7. Haz clic en "Apply". AWS reiniciará tu aplicación y el código PHP podrá leerla automáticamente.

===============================================================
2. EN AWS EC2 (Servidor Linux con Apache)
===============================================================
Si administras tu propio servidor EC2 con Apache, tienes dos formas comunes:

OPCIÓN A: En la configuración de Apache (Mejor práctica)
1. Conéctate por SSH a tu servidor.
2. Edita el archivo de configuración de tu sitio (ej: /etc/apache2/sites-available/000-default.conf).
   sudo nano /etc/apache2/sites-available/000-default.conf
3. Añade la línea "SetEnv" dentro del bloque <VirtualHost>:
   
   <VirtualHost *:80>
       ...
       DocumentRoot /var/www/html
       SetEnv OPENAI_API_KEY sk-proj-12345...
       ...
   </VirtualHost>

4. Guarda (Ctrl+O) y sal (Ctrl+X).
5. Reinicia Apache:
   sudo service apache2 restart

OPCIÓN B: Usando un archivo .htaccess (Más fácil pero menos óptimo)
1. En la carpeta raíz de tu proyecto en el servidor, crea o edita el archivo `.htaccess`.
2. Añade esta línea al final:
   SetEnv OPENAI_API_KEY sk-proj-12345...

===============================================================
3. EN LOCAL (XAMPP EN WINDOWS)
===============================================================
Para que funcione en tu ordenador mientras desarrollas:

OPCIÓN A: Configuración de Apache en XAMPP
1. Abre el Panel de Control de XAMPP.
2. En la fila de "Apache", haz clic en "Config" -> "Apache (httpd.conf)".
3. Baja hasta el final del archivo y añade:
   SetEnv OPENAI_API_KEY sk-proj-12345...
4. Guarda el archivo y reinicia Apache (Stop -> Start) desde el panel de XAMPP.

OPCIÓN B: Variables de Entorno de Windows
1. Pulsa la tecla Windows, escribe "editar las variables de entorno del sistema" y ábrelo.
2. Haz clic en el botón "Variables de entorno...".
3. En "Variables del sistema" (abajo), pulsa "Nueva".
4. Nombre: OPENAI_API_KEY
5. Valor: sk-proj-12345...
6. Acepta todo y **REINICIA** el ordenador (o al menos reinicia XAMPP completamente) para que PHP detecte el cambio.
